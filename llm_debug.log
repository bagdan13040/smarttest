=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: allenai/olmo-3.1-32b-think:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 2147
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 4288)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.2s elapsed
  Still waiting... 45.3s elapsed
  Still waiting... 50.3s elapsed
  Still waiting... 55.3s elapsed
Request timeout after 60.0s
Request completed in 60.0s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 223, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 157, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 2147
urllib.request.Request created
Opening URL...
Response received, status: 200
Response parsed successfully
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 1726
Content preview: {"theory": "[b]What are Roman Numerals?[/b]\n\nThey are a numeral system using letters from the Latin alphabet such as I, V, X, L, C, D, and M.\n\n[b]The Symbol II[/b]\n\nThe numeral II is formed by c...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: deepseek/deepseek-chat-v3-0324:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 2151
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 24056)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 139 bytes (total unknown)
Progress: 139 bytes (total unknown)
UrlRequest FAILURE!
  Status: 404
  Result: {'error': {'message': 'No endpoints found for deepseek/deepseek-chat-v3-0324:free.', 'code': 404}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Request completed in 0.5s
Request failed with error: HTTP 404: {'error': {'message': 'No endpoints found for deepseek/deepseek-chat-v3-0324:free.', 'code': 404}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Kivy UrlRequest failed: HTTP 404: {'error': {'message': 'No endpoints found for deepseek/deepseek-chat-v3-0324:free.', 'code': 404}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 223, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 157, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 404: {'error': {'message': 'No endpoints found for deepseek/deepseek-chat-v3-0324:free.', 'code': 404}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 2151
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 404: Not Found
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 202, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 404: Not Found

urllib failed: HTTP Error 404: Not Found
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 234, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 202, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 404: Not Found

Все методы HTTP не сработали: Kivy: HTTP 404: {'error': {'message': 'No endpoints found for deepseek/deepseek-chat-v3-0324:free.', 'code': 404}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 404: Not Found
Exception in generate_quiz: Все методы HTTP не сработали: Kivy: HTTP 404: {'error': {'message': 'No endpoints found for deepseek/deepseek-chat-v3-0324:free.', 'code': 404}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 404: Not Found
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 305, in generate_quiz
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 243, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 404: {'error': {'message': 'No endpoints found for deepseek/deepseek-chat-v3-0324:free.', 'code': 404}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 404: Not Found

generate_mock_quiz() called
  Error: Все методы HTTP не сработали: Kivy: HTTP 404: {'error': {'message': 'No endpoints found for deepseek/deepseek-chat-v3-0324:free.', 'code': 404}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 404: Not Found
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: deepseek/deepseek-v3.2
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 2138
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 25032)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 319 bytes (total unknown)
Progress: 319 bytes (total unknown)
UrlRequest FAILURE!
  Status: 402
  Result: {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 65536 tokens, but can only afford 15901. To increase, visit https://openrouter.ai/settings/credits and upgrade to a paid account', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Request completed in 0.6s
Request failed with error: HTTP 402: {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 65536 tokens, but can only afford 15901. To increase, visit https://openrouter.ai/settings/credits and upgrade to a paid account', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Kivy UrlRequest failed: HTTP 402: {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 65536 tokens, but can only afford 15901. To increase, visit https://openrouter.ai/settings/credits and upgrade to a paid account', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 223, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 157, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 402: {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 65536 tokens, but can only afford 15901. To increase, visit https://openrouter.ai/settings/credits and upgrade to a paid account', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 2138
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 402: Payment Required
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 202, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 402: Payment Required

urllib failed: HTTP Error 402: Payment Required
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 234, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 202, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 402: Payment Required

Все методы HTTP не сработали: Kivy: HTTP 402: {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 65536 tokens, but can only afford 15901. To increase, visit https://openrouter.ai/settings/credits and upgrade to a paid account', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 402: Payment Required
Exception in generate_quiz: Все методы HTTP не сработали: Kivy: HTTP 402: {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 65536 tokens, but can only afford 15901. To increase, visit https://openrouter.ai/settings/credits and upgrade to a paid account', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 402: Payment Required
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 305, in generate_quiz
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 243, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 402: {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 65536 tokens, but can only afford 15901. To increase, visit https://openrouter.ai/settings/credits and upgrade to a paid account', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 402: Payment Required

generate_mock_quiz() called
  Error: Все методы HTTP не сработали: Kivy: HTTP 402: {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 65536 tokens, but can only afford 15901. To increase, visit https://openrouter.ai/settings/credits and upgrade to a paid account', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 402: Payment Required
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 2141
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 9328)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16310 bytes (total unknown)
Progress: 16310 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Tue, 23 Dec 2025 14:46:41 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b28a657bf4dd0d1-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766501200-SMBZhokE6A3WJKYjHM0L', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766501200, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Что такое искусственный интеллект (ИИ)?[/b]\\nПод простым и понятным названием «искусственный интеллект» скрывается обширная область компьютерных наук, основная задача которой — со
Request completed in 31.7s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 8424
Content preview: {
"theory": "[b]Что такое искусственный интеллект (ИИ)?[/b]\nПод простым и понятным названием «искусственный интеллект» скрывается обширная область компьютерных наук, основная задача которой — создать...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 2141
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 15192)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 12224 bytes (total unknown)
Progress: 12224 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Tue, 23 Dec 2025 17:39:37 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b29a3a8a9680b8c-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766511576-C1F68ukqjAgP3cx63eGL', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766511576, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Что такое искусственный интеллект (ИИ)?[/b]\\nИскусственный интеллект (ИИ) — это широкая область компьютерных наук, которая занимается созданием умных машин, способных выполнять за
Request completed in 15.6s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 6332
Content preview: {
"theory": "[b]Что такое искусственный интеллект (ИИ)?[/b]\nИскусственный интеллект (ИИ) — это широкая область компьютерных наук, которая занимается созданием умных машин, способных выполнять задачи,...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 974
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 29024)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 8435 bytes (total unknown)
Progress: 8435 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Tue, 23 Dec 2025 18:01:18 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b29c36e39005639-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766512877-1ESzFkrvg2sgTQjQFeWo', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766512877, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Что такое Искусственный Интеллект (ИИ)?[/b]\\nИскусственный Интеллект (ИИ) — это широкая область компьютерных наук, которая занимается созданием умных машин, способных выполнять за
Request completed in 12.0s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 4296
Content preview: {
"theory": "[b]Что такое Искусственный Интеллект (ИИ)?[/b]\nИскусственный Интеллект (ИИ) — это широкая область компьютерных наук, которая занимается созданием умных машин, способных выполнять задачи,...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: эксперт
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 976
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 4136)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 95 bytes (total unknown)
Progress: 95 bytes (total unknown)
UrlRequest FAILURE!
  Status: 403
  Result: {'error': {'message': 'Access denied: This service is not available in your region.', 'code': 403}}
Request completed in 0.2s
Request failed with error: HTTP 403: {'error': {'message': 'Access denied: This service is not available in your region.', 'code': 403}}
Kivy UrlRequest failed: HTTP 403: {'error': {'message': 'Access denied: This service is not available in your region.', 'code': 403}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 425, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 257, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 403: {'error': {'message': 'Access denied: This service is not available in your region.', 'code': 403}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 976
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 403: Forbidden
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 306, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 403: Forbidden

urllib failed: HTTP Error 403: Forbidden
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 436, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 306, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 403: Forbidden

urllib error reason: Forbidden (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 403: {'error': {'message': 'Access denied: This service is not available in your region.', 'code': 403}}; urllib: HTTP Error 403: Forbidden
Exception in generate_quiz: Все методы HTTP не сработали: Kivy: HTTP 403: {'error': {'message': 'Access denied: This service is not available in your region.', 'code': 403}}; urllib: HTTP Error 403: Forbidden
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 533, in generate_quiz
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 471, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 403: {'error': {'message': 'Access denied: This service is not available in your region.', 'code': 403}}; urllib: HTTP Error 403: Forbidden

generate_mock_quiz() called
  Error: Все методы HTTP не сработали: Kivy: HTTP 403: {'error': {'message': 'Access denied: This service is not available in your region.', 'code': 403}}; urllib: HTTP Error 403: Forbidden
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: Общие знания
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 993
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 24404)>
Waiting for request to complete...
  Still waiting... 5.1s elapsed
  Still waiting... 10.5s elapsed
  Still waiting... 15.9s elapsed
  Still waiting... 21.4s elapsed
  Still waiting... 26.8s elapsed
  Still waiting... 32.2s elapsed
  Still waiting... 37.7s elapsed
  Still waiting... 43.1s elapsed
  Still waiting... 48.6s elapsed
  Still waiting... 54.0s elapsed
  Still waiting... 59.4s elapsed
Request timeout after 60.1s
Request completed in 60.1s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 500, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 332, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 993
urllib.request.Request created
Opening URL...
Response received, status: 200
Response parsed successfully
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 6858
Content preview: {
"theory": "[b]Введение в общие знания[/b]\n\nОбщие знания — это фундаментальная основа, которая помогает нам понимать мир вокруг нас. Они охватывают множество областей: от ежедневных бытовых навыков...
Parsing JSON response...
JSON parse error: Expecting ',' delimiter: line 104 column 2 (char 6858)
Content was: {
"theory": "[b]Введение в общие знания[/b]\n\nОбщие знания — это фундаментальная основа, которая помогает нам понимать мир вокруг нас. Они охватывают множество областей: от ежедневных бытовых навыков до основ науки и культуры. Представьте, что это как большой ящик с инструментами: чем больше у вас инструментов, тем проще решать разные задачи. Эти знания не требуют глубокой специализации, но они делают нас более уверенными и компетентными в жизни.\n\nНачнем с простого: общие знания включают в се...
generate_mock_quiz() called
  Error: Ошибка парсинга JSON: Expecting ',' delimiter: line 104 column 2 (char 6858)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 974
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 22764)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 13017 bytes (total unknown)
Progress: 13017 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Wed, 24 Dec 2025 15:19:00 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b3113128c0ad4d1-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766589540-bCdmM43e3eNrUv9SIK8w', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766589540, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Что такое искусственный интеллект (ИИ)?[/b]\\nИскусственный интеллект (ИИ) — это широкая область компьютерных наук, которая занимается созданием машин и программ, способных имитиро
Request completed in 25.0s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 6713
Content preview: {
"theory": "[b]Что такое искусственный интеллект (ИИ)?[/b]\nИскусственный интеллект (ИИ) — это широкая область компьютерных наук, которая занимается созданием машин и программ, способных имитировать ...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3191
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 23956)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1181 bytes (total unknown)
Progress: 1181 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Wed, 24 Dec 2025 15:20:34 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b31155848fa4bb6-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766589633-tW68juJj7U5hoDzLkW98', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766589633, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n[\n    "Машинное обучение (ML) и глубокое обучение (DL)",\n    "Методы обучения ИИ (с учителем, без учителя, с подкреплением)",\n    "Нейронные сети и архитектуры",\n    "Обработка естеств
Request completed in 3.0s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: ```json
[
    "Машинное обучение (ML) и глубокое обучение (DL)",
    "Методы обучения ИИ (с учителем, без учителя, с подкреплением)",
    "Нейронные сети и архитектуры",
    "Обработка естественного я...
Тема сохранена в памяти: Машинное обучение (ML) и глубокое обучение (DL)
Тема сохранена в памяти: Методы обучения ИИ (с учителем, без учителя, с подкреплением)
Тема сохранена в памяти: Нейронные сети и архитектуры
Тема сохранена в памяти: Обработка естественного языка (NLP)
Тема сохранена в памяти: Компьютерное зрение (Computer Vision)
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: аксиомы стереометрии 10 класс
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1023
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 21436)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 15523 bytes (total unknown)
Progress: 15523 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Wed, 24 Dec 2025 16:07:23 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b3159b18a563291-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766592433-2GuHRfwq1THnCy0hC39j', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766592433, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Аксиомы стереометрии: Основы трехмерного мира[/b]\\n\\n[b]Введение: Зачем нам нужны аксиомы в стереометрии?[/b]\\n\\nМы уже знакомы с геометрией на плоскости — Евклидовой геометрие
Request completed in 40.0s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 7802
Content preview: {
"theory": "[b]Аксиомы стереометрии: Основы трехмерного мира[/b]\n\n[b]Введение: Зачем нам нужны аксиомы в стереометрии?[/b]\n\nМы уже знакомы с геометрией на плоскости — Евклидовой геометрией. В ней...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3232
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 20352)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1111 bytes (total unknown)
Progress: 1111 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Wed, 24 Dec 2025 16:18:18 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b3169ec2df55088-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766593097-E8Lt1nKgcE0ZMlg51VbT', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766593097, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n"Аксиомы плоскостей в пространстве",\n"Сечения и параллельность в стереометрии",\n"Объемы и площади многогранников",\n"Координаты и векторы в пространстве",\n"Стереометрические задачи на построе
Request completed in 2.6s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: [
"Аксиомы плоскостей в пространстве",
"Сечения и параллельность в стереометрии",
"Объемы и площади многогранников",
"Координаты и векторы в пространстве",
"Стереометрические задачи на построение"
]...
Тема сохранена в памяти: Аксиомы плоскостей в пространстве
Тема сохранена в памяти: Сечения и параллельность в стереометрии
Тема сохранена в памяти: Объемы и площади многогранников
Тема сохранена в памяти: Координаты и векторы в пространстве
Тема сохранена в памяти: Стереометрические задачи на построение
Saved 5 topics to memory.
=== generate_quiz() starting ===
  Topic: Объемы и площади многогранников
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1029
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 27156)>
Waiting for request to complete...
  Still waiting... 5.3s elapsed
  Still waiting... 10.7s elapsed
  Still waiting... 16.1s elapsed
  Still waiting... 21.5s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 10667 bytes (total unknown)
Progress: 10667 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Wed, 24 Dec 2025 16:18:35 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b316a500bb4f5e3-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766593113-B2cM56ShEmqIT7scvJHB', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766593113, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "Предисловие\\n[b]Многогранники[/b] — это геометрические тела, ограниченные плоскими многоугольниками. В этой теме мы разберем, как вычислять их [b]площади[/b] (поверхности) и [b]объем
Request completed in 22.9s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 5572
Content preview: {
"theory": "Предисловие\n[b]Многогранники[/b] — это геометрические тела, ограниченные плоскими многоугольниками. В этой теме мы разберем, как вычислять их [b]площади[/b] (поверхности) и [b]объемы[/b]...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3226
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-9, started daemon 20368)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1076 bytes (total unknown)
Progress: 1076 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Wed, 24 Dec 2025 16:25:39 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b3174af1fe79701-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766593538-yN3O3cLk7kNimFCq9XaY', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766593538, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n"Формулы площадей и объемов пирамид",\n"Свойства и объемы пирамид",\n"Площадь поверхности пирамид",\n"Объемы и площади усеченных пирамид",\n"Объемы и площади неправильных многогранников"\n]', 'r
Request completed in 2.5s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: [
"Формулы площадей и объемов пирамид",
"Свойства и объемы пирамид",
"Площадь поверхности пирамид",
"Объемы и площади усеченных пирамид",
"Объемы и площади неправильных многогранников"
]...
Тема сохранена в памяти: Формулы площадей и объемов пирамид
Тема сохранена в памяти: Свойства и объемы пирамид
Тема сохранена в памяти: Площадь поверхности пирамид
Тема сохранена в памяти: Объемы и площади усеченных пирамид
Тема сохранена в памяти: Объемы и площади неправильных многогранников
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 974
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-119, started daemon 22864)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16316 bytes (total unknown)
Progress: 16316 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Wed, 24 Dec 2025 18:04:51 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b3205efed7af5c9-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766599488-0bdKnSV84KxaxEpuViv8', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766599488, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\\n\\nПривет! Давай поговорим об одной из самых захватывающих тем современности — об искусственном интеллекте, или сокращенно ИИ. Если 
Request completed in 31.9s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 8691
Content preview: {
  "theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\n\nПривет! Давай поговорим об одной из самых захватывающих тем современности — об искусственном интеллекте, или сокращенно ИИ. Если говори...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3228
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-121, started daemon 27316)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1111 bytes (total unknown)
Progress: 1111 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Wed, 24 Dec 2025 18:17:38 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b3218ba0c6c0b54-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766600257-BzlgbfpcGWhLOWXNBfqn', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766600257, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n[\n  "Типы машинного обучения: от супервизии к подкреплению",\n  "Нейронные сети и глубокое обучение",\n  "Обработка естественного языка (NLP)",\n  "Компьютерное зрение",\n  "Этика искусст
Request completed in 2.7s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: ```json
[
  "Типы машинного обучения: от супервизии к подкреплению",
  "Нейронные сети и глубокое обучение",
  "Обработка естественного языка (NLP)",
  "Компьютерное зрение",
  "Этика искусственного и...
Тема сохранена в памяти: Типы машинного обучения: от супервизии к подкреплению
Тема сохранена в памяти: Нейронные сети и глубокое обучение
Тема сохранена в памяти: Компьютерное зрение
Тема сохранена в памяти: Этика искусственного интеллекта
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 974
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 14228)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 12585 bytes (total unknown)
Progress: 12585 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Thu, 25 Dec 2025 15:27:55 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b395d6c8c9cfffd-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766676471-vMdgsTS7p6rK1JXYrKjv', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766676471, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Что такое Искусственный Интеллект (ИИ)?[/b]\\nИскусственный Интеллект (ИИ) — это широкая область компьютерных наук, которая занимается созданием интеллектуальных машин, способных в
Request completed in 22.3s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 6459
Content preview: {
"theory": "[b]Что такое Искусственный Интеллект (ИИ)?[/b]\nИскусственный Интеллект (ИИ) — это широкая область компьютерных наук, которая занимается созданием интеллектуальных машин, способных выполн...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 21512)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 2424)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 10040)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.5s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 18288)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== generate_quiz() starting ===
  Topic: Обработка естественного языка (NLP)
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1032
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 16024)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.2s elapsed
  Still waiting... 45.3s elapsed
  Still waiting... 50.3s elapsed
  Still waiting... 55.3s elapsed
Request timeout after 60.1s
Request completed in 60.1s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 1032
urllib.request.Request created
Opening URL...
Response received, status: 200
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 336)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 3692)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 15808)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 13004)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.5s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 12152)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 3976)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.8s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 15576)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "E:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 18168)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 1.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "E:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 3752)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "E:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 16924)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "E:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3264
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 21204)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3264
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "E:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "E:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "E:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: орфография русского языка
  Difficulty: средний
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1020
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 22676)>
Waiting for request to complete...
  Still waiting... 5.4s elapsed
  Still waiting... 10.8s elapsed
  Still waiting... 16.2s elapsed
  Still waiting... 21.6s elapsed
  Still waiting... 26.9s elapsed
  Still waiting... 32.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 15593 bytes (total unknown)
Progress: 15593 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Thu, 25 Dec 2025 18:54:13 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b3a8b9d4b61d592-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766688849-hrIOnHvgXRLtSlVD5F9H', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766688849, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "theory": "[b]ВВЕДЕНИЕ В ОРФОГРАФИЮ РУССКОГО ЯЗЫКА[/b]\\nОрфография (от греч. orthographia — «правописание») — это система правил написания слов, принятая в данном языке. Она включает
Request completed in 33.7s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 8444
Content preview: ```json
{
  "theory": "[b]ВВЕДЕНИЕ В ОРФОГРАФИЮ РУССКОГО ЯЗЫКА[/b]\nОрфография (от греч. orthographia — «правописание») — это система правил написания слов, принятая в данном языке. Она включает прави...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: Python программирование
  Difficulty: средний
  API key provided: False
  Platform: win32
  IS_ANDROID: False
API key from env: True
Using API Key: sk-or-v1-2...34436
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1011
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-1, started daemon 18912)>
Waiting for request to complete...
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 974
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 11840)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 8758 bytes (total unknown)
Progress: 8758 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 28 Dec 2025 10:15:00 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b504b4329296630-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766916900-VdHaDKKRoq9xuqePajv1', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766916900, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Что такое искусственный интеллект (ИИ)?[/b]\\nИскусственный интеллект (ИИ) — это широкая область компьютерных наук, занимающаяся созданием систем, способных выполнять задачи, котор
Request completed in 17.5s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 4384
Content preview: {
"theory": "[b]Что такое искусственный интеллект (ИИ)?[/b]\nИскусственный интеллект (ИИ) — это широкая область компьютерных наук, занимающаяся созданием систем, способных выполнять задачи, которые тр...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1102
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 8492)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 22326 bytes (total unknown)
Progress: 22326 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 28 Dec 2025 10:19:42 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b505225bfe166a6-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766917182-sTSEwtt5X7CJYTYdd5Yk', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766917182, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Введение в искусственный интеллект: основы для начинающих[/b]\\n\\nПривет! Давай поговорим об одной из самых захватывающих технологий нашего времени — искусственном интеллекте, или
Request completed in 32.9s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 11604
Content preview: {
"theory": "[b]Введение в искусственный интеллект: основы для начинающих[/b]\n\nПривет! Давай поговорим об одной из самых захватывающих технологий нашего времени — искусственном интеллекте, или сокра...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1740
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 9284)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 15524 bytes (total unknown)
Progress: 15524 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 28 Dec 2025 10:23:36 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b5057d6afef299d-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766917415-cyosmHbOUzfHy9qHKOnx', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766917415, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "theory": "[b]ВВЕДЕНИЕ В МИР ИСКУССТВЕННОГО ИНТЕЛЛЕКТА[/b]\\n\\nПривет! Давай поговорим об Искусственном Интеллекте (ИИ). Если говорить простыми словами, ИИ — это попытка человека соз
Request completed in 26.9s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 8396
Content preview: ```json
{
  "theory": "[b]ВВЕДЕНИЕ В МИР ИСКУССТВЕННОГО ИНТЕЛЛЕКТА[/b]\n\nПривет! Давай поговорим об Искусственном Интеллекте (ИИ). Если говорить простыми словами, ИИ — это попытка человека создать \"...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 4420)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 22368 bytes (total unknown)
Progress: 22368 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 28 Dec 2025 10:28:12 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b505e99ee879deb-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766917692-JgxuH4xt72m17JeMOCBQ', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766917692, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в Искусственный Интеллект (ИИ)[/b]\\n\\n[i]Искусственный интеллект (ИИ)[/i] — это обширная область компьютерных наук, которая занимается созданием интеллектуальных машин
Request completed in 35.5s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 12075
Content preview: {
  "theory": "[b]Введение в Искусственный Интеллект (ИИ)[/b]\n\n[i]Искусственный интеллект (ИИ)[/i] — это обширная область компьютерных наук, которая занимается созданием интеллектуальных машин и сис...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: эксперт
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1284
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-6, started daemon 20240)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 23423 bytes (total unknown)
Progress: 23423 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 28 Dec 2025 10:28:58 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b505fb43bfc751f-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766917737-ffMp8WYHyOsDvuSOU0UP', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766917737, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение: Сущность и Эволюция Искусственного Интеллекта (ИИ)[/b]\\n\\nИскусственный интеллект, часто сокращаемый до [b]ИИ[/b] (Artificial Intelligence), представляет собой обширн
Request completed in 35.1s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 12781
Content preview: {
  "theory": "[b]Введение: Сущность и Эволюция Искусственного Интеллекта (ИИ)[/b]\n\nИскусственный интеллект, часто сокращаемый до [b]ИИ[/b] (Artificial Intelligence), представляет собой обширную обл...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 5988)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.4s elapsed
  Still waiting... 15.8s elapsed
  Still waiting... 20.9s elapsed
  Still waiting... 25.9s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 19706 bytes (total unknown)
Progress: 19706 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 28 Dec 2025 10:49:35 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b507de6997afea0-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766918974-C4MxoAAPHEZSOYiOhr9D', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766918974, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "Тема: [b]Искусственный интеллект (ИИ)[/b] и его основы\\n\\nВведение: Что такое Искусственный интеллект?\\n\\n[b]Искусственный интеллект (ИИ)[/b] — это обширная область компьютерных
Request completed in 30.5s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 10624
Content preview: {
  "theory": "Тема: [b]Искусственный интеллект (ИИ)[/b] и его основы\n\nВведение: Что такое Искусственный интеллект?\n\n[b]Искусственный интеллект (ИИ)[/b] — это обширная область компьютерных наук, к...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 9736)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.3s elapsed
  Still waiting... 40.3s elapsed
  Still waiting... 45.4s elapsed
  Still waiting... 50.4s elapsed
  Still waiting... 55.5s elapsed
Request timeout after 60.0s
Request completed in 60.0s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 1282
urllib.request.Request created
Opening URL...
Response received, status: 200
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 28329 bytes (total unknown)
Progress: 28329 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 28 Dec 2025 11:02:27 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b5090c4f8da1606-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1766919747-DkXtwYkr4VNq7pq85qXA', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1766919747, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в искусственный интеллект[/b]\\n\\n[i]Искусственный интеллект (ИИ)[/i] — это обширная область компьютерных наук, которая занимается созданием интеллектуальных машин и пр
Response parsed successfully
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 13767
Content preview: {
  "theory": "[b]Введение в искусственный интеллект[/b]\n\nИскусственный интеллект, или [b]ИИ[/b] (Artificial Intelligence), — это одна из самых захватывающих и стремительно развивающихся областей со...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_open_questions() starting ===
  Topic: Python Basics
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 775
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-1, started daemon 24448)>
Waiting for request to complete...
  Still waiting... 5.4s elapsed
  Still waiting... 10.8s elapsed
  Still waiting... 16.1s elapsed
  Still waiting... 21.5s elapsed
  Still waiting... 26.8s elapsed
  Still waiting... 32.2s elapsed
  Still waiting... 37.5s elapsed
  Still waiting... 42.9s elapsed
  Still waiting... 48.3s elapsed
  Still waiting... 53.6s elapsed
  Still waiting... 59.0s elapsed
Request timeout after 60.1s
Request completed in 60.1s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 775
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: Request timeout; urllib: HTTP Error 401: Unauthorized
Error generating open questions: Все методы HTTP не сработали: Kivy: Request timeout; urllib: HTTP Error 401: Unauthorized
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 948
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-2, started daemon 84)>
Waiting for request to complete...
  Still waiting... 5.4s elapsed
  Still waiting... 10.8s elapsed
  Still waiting... 16.1s elapsed
  Still waiting... 21.4s elapsed
  Still waiting... 26.8s elapsed
  Still waiting... 32.2s elapsed
  Still waiting... 37.5s elapsed
  Still waiting... 42.9s elapsed
  Still waiting... 48.2s elapsed
  Still waiting... 53.6s elapsed
  Still waiting... 59.0s elapsed
Request timeout after 60.1s
Request completed in 60.1s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 948
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: Request timeout; urllib: HTTP Error 401: Unauthorized
Error evaluating answer: Все методы HTTP не сработали: Kivy: Request timeout; urllib: HTTP Error 401: Unauthorized
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_open_questions() starting ===
  Topic: Общие знания
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 783
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 17932)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 3130 bytes (total unknown)
Progress: 3130 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Mon, 29 Dec 2025 20:05:02 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b5be8e43800fff6-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767038700-WtJEft8CIoSJzK85HTJU', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767038700, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Что такое интернет и как он работает?",\n    "notes": "Глобальная сеть компьютеров; Протоколы TCP/IP; Передача данных пакетами; Роли серверов и клиентов; И
Request completed in 6.6s
Returning result: <class 'dict'>
JSON parse error in open questions: [
  {
    "id": "q1",
    "question": "Что такое интернет и как он работает?",
    "notes": "Глобальная сеть компьютеров; Протоколы TCP/IP; Передача данных пакетами; Роли серверов и клиентов; Использо
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3269
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 22708)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3269
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 6428)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.2s elapsed
  Still waiting... 45.3s elapsed
  Still waiting... 50.3s elapsed
  Still waiting... 55.3s elapsed
Request timeout after 60.0s
Request completed in 60.0s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 1282
urllib.request.Request created
Opening URL...
Response received, status: 200
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 27091 bytes (total unknown)
Progress: 27091 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:18:48 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7ae3452e15dde3-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767363528-FDREUG0GyAHJtHYUJXwl', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767363528, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Введение в искусственный интеллект: основы и перспективы[/b]\\n\\n[paragraph]Тема искусственного интеллекта (ИИ) стала одной из самых обсуждаемых и революционных в современном мире
Response parsed successfully
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 11643
Content preview: {
"theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\n\nИскусственный интеллект, или ИИ (от англ. Artificial Intelligence, AI), — это одна из самых революционных и трансформационных технологий ...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3232
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 23072)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1050 bytes (total unknown)
Progress: 1050 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:30:45 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7af4c278a9f4cb-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767364245-tDWGZW6nT38BzO4003oK', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767364245, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  "Этика и безопасность ИИ",\n  "Объясняемый ИИ (XAI)",\n  "Нейросетевые архитектуры",\n  "Машинное обучение в прикладных задачах",\n  "Роль ИИ в научных исследованиях"\n]', 'refusal': None, 're
Request completed in 3.8s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: [
  "Этика и безопасность ИИ",
  "Объясняемый ИИ (XAI)",
  "Нейросетевые архитектуры",
  "Машинное обучение в прикладных задачах",
  "Роль ИИ в научных исследованиях"
]...
Тема сохранена в памяти: Этика и безопасность ИИ
Тема сохранена в памяти: Объясняемый ИИ (XAI)
Тема сохранена в памяти: Нейросетевые архитектуры
Тема сохранена в памяти: Машинное обучение в прикладных задачах
Тема сохранена в памяти: Роль ИИ в научных исследованиях
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 17948)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 21493 bytes (total unknown)
Progress: 21493 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:37:20 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7afe63ab15f5d5-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767364639-6bU61kHU38RcHwTXLIVy', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767364639, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\\n\\nИскусственный интеллект (ИИ) — одна из самых трансформационных и дискуссионных технологий современности. В самом широком смысле ИИ 
Request completed in 31.5s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 11339
Content preview: {
"theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\n\nИскусственный интеллект (ИИ) — одна из самых трансформационных и дискуссионных технологий современности. В самом широком смысле ИИ — это ...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 8436)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 3349 bytes (total unknown)
Progress: 3349 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:38:26 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b00074c7df5da-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767364706-QirX5Y8W1R6gT7cE5W1H', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767364706, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Что такое искусственный интеллект (ИИ) в самом общем смысле? Приведите три примера применения ИИ в повседневной жизни.",\n    "notes": "Определение ИИ как 
Request completed in 11.4s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3921
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 2588)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2717 bytes (total unknown)
Progress: 2717 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:39:51 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b0209c809de50-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767364789-rLXj1ElxiAQbaHSDZZbS', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767364789, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 9,\n  "max_score": 10,\n  "commentary": "Отличный ответ. Студент дал развернутое и точное определение ИИ, которое полностью соответствует ожидаемому. Примеры не просто перечи
Request completed in 7.0s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 4689
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-9, started daemon 22468)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2851 bytes (total unknown)
Progress: 2851 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:42:05 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b054d3ac10d1a-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767364922-2dwp5vnpHnH7ziGoUSLI', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767364922, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 9,\n  "max_score": 10,\n  "commentary": "Ответ студента является очень хорошим. Он четко и структурировано определяет оба типа ИИ, приводит конкретные примеры и подробно объя
Request completed in 7.7s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 4538
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-11, started daemon 23712)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2159 bytes (total unknown)
Progress: 2159 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:44:34 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b08ead8b3f5dc-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767365070-IIKQGFlUwWNjBjveUCTT', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767365070, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "score": 9,\n  "max_score": 10,\n  "commentary": "Отличный и подробный ответ. Студент четко описал две этические проблемы (смещение данных и приватность), подкрепил их релевантными примерами и
Request completed in 7.3s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3262
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-13, started daemon 12172)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1060 bytes (total unknown)
Progress: 1060 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:46:02 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b0b26fc2c8239-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767365162-i7faphkqMTxzsxqVxmk6', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767365162, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '["Этика и ответственность в ИИ","ИИ в медицине и здравоохранении","Нейронные сети и глубокое обучение","Робототехника и автономные системы","Машинное обучение для предпринимательства"]', 'refusal':
Request completed in 2.0s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: ["Этика и ответственность в ИИ","ИИ в медицине и здравоохранении","Нейронные сети и глубокое обучение","Робототехника и автономные системы","Машинное обучение для предпринимательства"]...
Тема сохранена в памяти: Этика и ответственность в ИИ
Тема сохранена в памяти: ИИ в медицине и здравоохранении
Тема сохранена в памяти: Робототехника и автономные системы
Тема сохранена в памяти: Машинное обучение для предпринимательства
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 17040)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.3s elapsed
  Still waiting... 15.7s elapsed
  Still waiting... 20.7s elapsed
  Still waiting... 25.8s elapsed
  Still waiting... 30.8s elapsed
  Still waiting... 35.8s elapsed
  Still waiting... 40.9s elapsed
  Still waiting... 45.9s elapsed
  Still waiting... 50.9s elapsed
  Still waiting... 55.9s elapsed
Request timeout after 60.1s
Request completed in 60.1s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 1282
urllib.request.Request created
Opening URL...
Response received, status: 200
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 28434 bytes (total unknown)
Progress: 28434 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:54:35 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b17ad78692d36-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767365675-x38JrzLPRtWhC2KNYkpx', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767365675, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в искусственный интеллект[/b]\\n\\nИскусственный интеллект (ИИ) — одна из самых захватывающих и трансформирующих технологий современности. Часто окруженный ореолом таинс
Response parsed successfully
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 15380
Content preview: {
  "theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\n\n[i]Искусственный интеллект (ИИ)[/i] — это одна из наиболее трансформационных и быстрорастущих областей в современной науке и технология...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3262
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 24080)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 986 bytes (total unknown)
Progress: 986 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:56:40 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b1ab82c236687-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767365799-btFiJ4DEmEf9EmwfBTM7', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767365799, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  "Машинное обучение",\n  "Обработка естественного языка",\n  "Компьютерное зрение",\n  "Нейронные сети и Глубокое обучение",\n  "Этика и безопасность ИИ"\n]', 'refusal': None, 'reasoning': None
Request completed in 1.7s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: [
  "Машинное обучение",
  "Обработка естественного языка",
  "Компьютерное зрение",
  "Нейронные сети и Глубокое обучение",
  "Этика и безопасность ИИ"
]...
Тема сохранена в памяти: Машинное обучение
Тема сохранена в памяти: Обработка естественного языка
Тема сохранена в памяти: Нейронные сети и Глубокое обучение
Saved 5 topics to memory.
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 13704)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 2589 bytes (total unknown)
Progress: 2589 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:56:50 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b1aee2f38b980-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767365808-qRp0G0QPqHndbzatdAQN', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767365808, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Что такое искусственный интеллект (ИИ) и какие задачи он решает в повседневной жизни?",\n    "notes": "Определение ИИ; Примеры из повседневности (рекоменда
Request completed in 14.5s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1201
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-9, started daemon 16544)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2562 bytes (total unknown)
Progress: 2562 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:57:33 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b1be3de47de1c-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767365847-aFtPiOJydqVQteqjMyS1', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767365847, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ не содержит никакой информации по заданной теме. Студент не попытался дать определение ИИ, привести примеры или описать подходы, что явл
Request completed in 9.6s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1213
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-11, started daemon 16924)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2567 bytes (total unknown)
Progress: 2567 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:57:54 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b1c895f5abd47-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767365874-2KMUZifPIg18OtRXFucm', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767365874, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ не отражает знаний по теме. Фраза \'хз\' является отказом от ответа и не содержит никакой информации о различиях типов ИИ или п
Request completed in 7.5s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1107
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-13, started daemon 23072)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 2213 bytes (total unknown)
Progress: 2213 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:58:15 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b1cecbf749f5a-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767365890-p2Ooandc3Qp4WS7r0MNT', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767365890, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ полностью не соответствует заданию. Студент не предоставил никакой информации о жизненном цикле проекта на базе ИИ. Использован неформал
Request completed in 10.2s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3262
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-15, started daemon 24168)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1039 bytes (total unknown)
Progress: 1039 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 14:58:26 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b1d4e39ca1c94-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767365905-RgvBMDnUgUDuO60Wcuxv', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767365905, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  "Машинное обучение (Machine Learning)",\n  "Нейронные сети и глубокое обучение",\n  "Обработка естественного языка (NLP)",\n  "Компьютерное зрение",\n  "Этика искусственного интеллекта"\n]', '
Request completed in 1.8s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: [
  "Машинное обучение (Machine Learning)",
  "Нейронные сети и глубокое обучение",
  "Обработка естественного языка (NLP)",
  "Компьютерное зрение",
  "Этика искусственного интеллекта"
]...
Тема сохранена в памяти: Машинное обучение (Machine Learning)
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 25256)>
Waiting for request to complete...
  Still waiting... 5.3s elapsed
  Still waiting... 10.7s elapsed
  Still waiting... 16.1s elapsed
  Still waiting... 21.6s elapsed
  Still waiting... 27.0s elapsed
  Still waiting... 32.4s elapsed
  Still waiting... 37.8s elapsed
  Still waiting... 43.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 26454 bytes (total unknown)
Progress: 26454 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 15:42:02 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b5d0e8c1dd0d9-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767368516-MFy2l86dAi5TMx4T9Bv5', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767368516, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в искусственный интеллект: Основы и перспективы[/b]\\n\\n[i]Искусственный интеллект (ИИ)[/i] — одна из самых революционных и обсуждаемых технологий современности. Часто 
Request completed in 47.5s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 14145
Content preview: {
  "theory": "[b]Введение в искусственный интеллект: Основы и перспективы[/b]\n\n[i]Искусственный интеллект (ИИ)[/i] — одна из самых революционных и обсуждаемых технологий современности. Часто окруже...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 22984)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 25277 bytes (total unknown)
Progress: 25277 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 15:48:46 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b670c0a19feac-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767368926-Qyqht1SrMop0FhgaEJua', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767368926, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Введение в искусственный интеллект[/b]\\n\\nИскусственный интеллект (ИИ) — это одна из самых трансформационных и дискуссионных технологий современности. Простыми словами, это облас
Request completed in 40.1s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 13225
Content preview: {
"theory": "[b]Введение в искусственный интеллект[/b]\n\nИскусственный интеллект (ИИ) — это одна из самых трансформационных и дискуссионных технологий современности. Простыми словами, это область ком...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 18832)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 3583 bytes (total unknown)
Progress: 3583 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 15:49:39 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b68289a01d3db-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767368971-MCF4ByWqXWmkuy3M0ukc', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767368971, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Что такое искусственный интеллект (ИИ) в широком смысле и в чём принципиальное отличие «слабого» ИИ (Weak AI) от «сильного» ИИ (Strong AGI)?",\n    "notes"
Request completed in 13.8s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1556
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 22156)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2080 bytes (total unknown)
Progress: 2080 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 15:50:48 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b6a022da5de1c-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369047-Q9erXeHFO1hNy8te2Cci', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369047, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ полностью игнорирует вопрос и требования к нему. Студент проявил неуважение, не продемонстрировал никаких знаний по теме и не в
Request completed in 8.1s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1546
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-9, started daemon 6172)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 2127 bytes (total unknown)
Progress: 2127 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 15:51:28 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b6b0049e666ff-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369088-xiKMbMKX98UV77SVEYHv', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369088, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ полностью не соответствует заданию. Студент не предоставил никакой информации по затронутым темам (ИИ, обучение с учителем/без 
Request completed in 4.2s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1494
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-11, started daemon 25400)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2216 bytes (total unknown)
Progress: 2216 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 15:52:04 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b6be24ea95088-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369124-dalXFmRp8Gda48uvIpTQ', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369124, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ полностью не соответствует заданию. Это грубая невежливость вместо анализа сложных этических и социальных вопросов, связанных с
Request completed in 5.3s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3257
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-13, started daemon 13520)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1088 bytes (total unknown)
Progress: 1088 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 15:53:05 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b6d5c4a8f9fa2-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369184-WDfUk9n9jS7YP7Hvafer', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369184, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n[\n    "Типы ИИ: Weak AI и Strong AI",\n    "История искусственного интеллекта",\n    "Ключевые способности современного ИИ",\n    "Философия и природа интеллекта",\n    "Примеры приложени
Request completed in 2.8s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: ```json
[
    "Типы ИИ: Weak AI и Strong AI",
    "История искусственного интеллекта",
    "Ключевые способности современного ИИ",
    "Философия и природа интеллекта",
    "Примеры приложения узкого ...
Тема сохранена в памяти: Типы ИИ: Weak AI и Strong AI
Тема сохранена в памяти: История искусственного интеллекта
Тема сохранена в памяти: Ключевые способности современного ИИ
Тема сохранена в памяти: Философия и природа интеллекта
Тема сохранена в памяти: Примеры приложения узкого ИИ
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 4608)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.2s elapsed
  Still waiting... 45.3s elapsed
  Still waiting... 50.3s elapsed
  Still waiting... 55.3s elapsed
Request timeout after 60.0s
Request completed in 60.0s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 1282
urllib.request.Request created
Opening URL...
Response received, status: 200
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 32768 bytes (total unknown)
Progress: 37530 bytes (total unknown)
Progress: 37530 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 15:59:21 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b768e3976b89c-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369561-4Zf7zxxKkG7HWxcPfefh', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369561, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\\n\\nИскусственный интеллект, или ИИ (от англ. Artificial Intelligence, AI), — это одна из самых захватывающих и стремительно развивающи
Response parsed successfully
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 10977
Content preview: {
"theory": "Вступление\n\n[b]Искусственный интеллект (ИИ)[/b] — это одна из самых трансформационных и дискуссионных технологий современности. Простыми словами, это широкая область компьютерных наук, ...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 24396)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 3262 bytes (total unknown)
Progress: 3262 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:01:46 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b7a18ae1c5639-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369706-btf0rrDjJgdNyPxTl0Ol', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369706, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Что такое искусственный интеллект (ИИ) в самом общем смысле и какие основные цели преследует его создание?",\n    "notes": "Определение ИИ как науки и техн
Request completed in 11.6s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1409
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 24976)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2210 bytes (total unknown)
Progress: 2210 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:02:02 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b7a7b6f545406-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369722-aMFFrdnDqJGeImOtv8Mw', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369722, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ не содержит никакой информации по заданной теме. Студент ввел бессмысленный набор букв, который не отвечает на вопрос о сути ИИ и его це
Request completed in 6.6s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1626
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-9, started daemon 8916)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2621 bytes (total unknown)
Progress: 2621 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:03:09 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b7c1bbf6dab40-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369788-ASYL0AeUAio70bC7pwIb', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369788, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "score": 3,\n  "max_score": 10,\n  "commentary": "Ответ студента соответствует лишь общему контексту задания, но не выполняет его конкретные требования. Студент не привел ни одного примера, не
Request completed in 7.0s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1470
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-11, started daemon 8008)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 3670 bytes (total unknown)
Progress: 3670 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:03:43 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b7ccb2c9d4b63-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369816-PFe0dJQL23GQrGto3dSl', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369816, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 2,\n  "max_score": 10,\n  "commentary": "Ответ частично затрагивает одну из проблем (влияние на занятость), но сделан в слишком упрощенной форме без раскрытия этической соста
Request completed in 11.7s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3257
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-13, started daemon 13520)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1127 bytes (total unknown)
Progress: 1127 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:03:51 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b7d256e3d907e-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767369831-jtPXnRm22m3GS5RoRLv3', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767369831, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '["История искусственного интеллекта", "Этические проблемы ИИ и социальные риски", "Обучение больших языковых моделей (LLM)", "Различие слабого (ANI) и сильного (AGI) ИИ", "Применение ИИ в медицине 
Request completed in 3.0s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: ["История искусственного интеллекта", "Этические проблемы ИИ и социальные риски", "Обучение больших языковых моделей (LLM)", "Различие слабого (ANI) и сильного (AGI) ИИ", "Применение ИИ в медицине и д...
Тема сохранена в памяти: Этические проблемы ИИ и социальные риски
Тема сохранена в памяти: Обучение больших языковых моделей (LLM)
Тема сохранена в памяти: Различие слабого (ANI) и сильного (AGI) ИИ
Тема сохранена в памяти: Применение ИИ в медицине и диагностике
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 3664)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 2627 bytes (total unknown)
Progress: 2627 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:08:12 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b83804c620e50-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767370091-hBrqh3zxr2XuOgOrOWM2', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767370091, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Что такое искусственный интеллект (ИИ) простыми словами и в чём его основное отличие от обычных компьютерных программ?",\n    "notes": "Определение ИИ как 
Request completed in 4.8s
Returning result: <class 'dict'>
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 22344)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2791 bytes (total unknown)
Progress: 2791 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:10:50 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b87570e790bc5-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767370248-DbmqwRKvGPU62xP0kt3e', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767370248, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n[\n  {\n    "id": "q1",\n    "question": "Что такое \'искусственный интеллект\' (ИИ) в широком смысле, и какие основные цели преследует его создание?",\n    "notes": "Определение ИИ как на
Request completed in 6.4s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1296
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 11700)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 2208 bytes (total unknown)
Progress: 2208 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:11:19 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b880eeeeb8f37-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767370278-pA8cNO6bgtLeeDsxc3eU', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767370278, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ не отражает знаний по заданной теме. Студент ввел бессмысленный набор символов, который не содержит корректной информации об ис
Request completed in 4.0s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1454
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 24232)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2415 bytes (total unknown)
Progress: 2415 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:11:44 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b88a338493d63-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767370301-qAZZEwMNeCHhpvUHpRZP', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767370301, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ не соответствует заданию: в нем нет ни примеров использования ИИ (персональные ассистенты, рекомендательные системы, генеративные ИИ, ра
Request completed in 5.6s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1256
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-9, started daemon 25080)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 2061 bytes (total unknown)
Progress: 2061 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:12:52 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b8a1a5c50a11d-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767370362-ThRGABMWCM9PN9SXE3Ni', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767370362, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ не отвечает на заданный вопрос и не содержит информации по теме. Это шантаж и попытка манипуляции, что недопустимо в академичес
Request completed in 15.2s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3257
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-11, started daemon 20116)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3257
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 11604)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 3043 bytes (total unknown)
Progress: 3043 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:19:39 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b9438c8e48709-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767370776-zJS8GU4gqucvG1heerpW', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767370776, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n[\n  {\n    "id": "q1",\n    "question": "Что такое искусственный интеллект (ИИ) своими словами и в чем заключается идея «учения машины»?",\n    "notes": "Определение ИИ как науки о создан
Request completed in 12.3s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3257
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 2900)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3257
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 18340)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 3478 bytes (total unknown)
Progress: 3478 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:23:38 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b9a19fca4f4d1-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767371017-okN2vGArJnhGdGA4Xdgk', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767371017, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Что такое искусственный интеллект (ИИ) простыми словами, и в чём ключевое отличие между узким (слабым) и общим (сильным) ИИ? Приведите по одному примеру дл
Request completed in 6.6s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1575
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 16312)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2206 bytes (total unknown)
Progress: 2206 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:23:50 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7b9a5dbd286692-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767371028-L9ZHbnAWGghX3vXzq9Xb', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767371028, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ не содержит никакой информации, относящейся к вопросу. Студент ввел бессмысленный набор символов, что не соответствует требован
Request completed in 5.2s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3257
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 22712)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3257
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 16760)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2786 bytes (total unknown)
Progress: 2786 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:33:35 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7ba8b35f4d96ff-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767371615-PegLKNXLRlERrXYohEd7', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767371615, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Что такое искусственный интеллект (ИИ) и каковы его основные цели?",\n    "notes": "Определение ИИ как науки и технологии; различие слабого (узкого) и силь
Request completed in 9.1s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3257
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 17004)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 1.0s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3257
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 7836)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 3059 bytes (total unknown)
Progress: 3059 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:38:19 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7baf9d8a069704-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767371898-pM779hdKnaE6Z7QCctVk', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767371898, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Что такое искусственный интеллект (ИИ) и каковы основные направления его применения в современном мире?",\n    "notes": "Определение ИИ (компьютерные систе
Request completed in 19.7s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1452
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 22184)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2628 bytes (total unknown)
Progress: 2628 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:39:00 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7bb07e4b565c3d-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767371934-y1qIAS1AJwiO9fBiLhTg', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767371934, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ студента представляет собой набор бессмысленных символов и не содержит никакой информации по заданной теме. Он не отвечает на вопрос и н
Request completed in 9.3s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3257
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 16024)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3257
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 23072)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 23756 bytes (total unknown)
Progress: 23756 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:44:25 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7bb8914b1d9f5e-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767372265-BBs8RLPEFA5Mnu9OOjCp', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767372265, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в Искусственный Интеллект (ИИ)[/b]\\n\\nИскусственный интеллект, или ИИ (от англ. Artificial Intelligence), является одной из самых трансформационных и дискуссионных тех
Request completed in 36.8s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 12883
Content preview: {
  "theory": "[b]Введение в Искусственный Интеллект (ИИ)[/b]\n\nИскусственный интеллект, или ИИ (от англ. Artificial Intelligence), является одной из самых трансформационных и дискуссионных технологи...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_open_questions() starting ===
  Topic: ии
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 764
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 20856)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 3672 bytes (total unknown)
Progress: 3672 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:49:23 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7bbfd9c99577ce-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767372563-yN9pa3O3tPAK3XFBt7ix', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767372563, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Перечислите и кратко опишите основные типы машинного обучения. Приведите по одному примеру задачи для каждого типа.",\n    "notes": "supervised (обучение с
Request completed in 10.0s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3254
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 16636)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1269 bytes (total unknown)
Progress: 1269 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 16:49:44 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7bc0541886d4d1-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767372583-TZntJ0Bfi1OLbhFbvX3L', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767372583, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  "Сравнительный анализ узкого и сильного ИИ",\n  "Этика искусственного интеллекта и безопасность",\n  "Принципы работы нейронных сетей и глубокого обучения",\n  "Роль ИИ в распознавании изображ
Request completed in 3.0s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: [
  "Сравнительный анализ узкого и сильного ИИ",
  "Этика искусственного интеллекта и безопасность",
  "Принципы работы нейронных сетей и глубокого обучения",
  "Роль ИИ в распознавании изображений и ...
Тема сохранена в памяти: Сравнительный анализ узкого и сильного ИИ
Тема сохранена в памяти: Этика искусственного интеллекта и безопасность
Тема сохранена в памяти: Принципы работы нейронных сетей и глубокого обучения
Тема сохранена в памяти: Роль ИИ в распознавании изображений и обработке естественного языка
Тема сохранена в памяти: Будущее ИИ: ИИ-са́мосознание и сингулярность
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3254
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 24188)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3254
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3254
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 23680)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3254
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3254
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 4332)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3254
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3254
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 24252)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3254
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3254
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 14160)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3254
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3254
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 16696)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3254
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3254
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 17272)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3254
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3254
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 6260)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3254
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== generate_quiz() starting ===
  Topic: Компьютерное зрение (Computer Vision)
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1333
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-6, started daemon 9252)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.3s elapsed
  Still waiting... 45.3s elapsed
  Still waiting... 50.3s elapsed
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 21432)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 23073 bytes (total unknown)
Progress: 23073 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 17:13:24 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7be301189cbb09-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767374003-C2KYalGosktQPCcxgt0C', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767374003, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в искусственный интеллект[/b]\\n\\nИскусственный интеллект (ИИ) — это одна из самых революционных и трансформационных технологий современности. По своей сути, ИИ предста
Request completed in 34.0s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 12369
Content preview: {
  "theory": "[b]Введение в искусственный интеллект[/b]\n\nИскусственный интеллект (ИИ) — это одна из самых революционных и трансформационных технологий современности. По своей сути, ИИ представляет ...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3291
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-6, started daemon 23716)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1115 bytes (total unknown)
Progress: 1115 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 17:14:21 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7be4656b012d8e-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767374060-zio3Rox2M3BwAuSNxF18', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767374060, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n"Этика и предвзятость искусственного интеллекта",\n"Обучение с подкреплением",\n"Нейронные сети и глубокое обучение",\n"Машинное обучение в медицине",\n"Взаимодействие человек-компьютер с исполь
Request completed in 2.5s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: [
"Этика и предвзятость искусственного интеллекта",
"Обучение с подкреплением",
"Нейронные сети и глубокое обучение",
"Машинное обучение в медицине",
"Взаимодействие человек-компьютер с использованием...
Тема сохранена в памяти: Этика и предвзятость искусственного интеллекта
Тема сохранена в памяти: Обучение с подкреплением
Тема сохранена в памяти: Машинное обучение в медицине
Тема сохранена в памяти: Взаимодействие человек-компьютер с использованием ИИ
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3291
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-14, started daemon 4060)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3291
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3291
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-18, started daemon 15572)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.4s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3291
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1457
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-22, started daemon 26196)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 2333 bytes (total unknown)
Progress: 2333 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 18:35:03 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7c5a9faa8f6da5-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767378903-1iAqTSNYgl21MgdXpbMG', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767378903, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ не соответствует заданию. Студент предоставил одно не имеющее отношения к теме слово вместо перечисления типов машинного обучен
Request completed in 4.0s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1604
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-24, started daemon 4068)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 2340 bytes (total unknown)
Progress: 2340 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 18:35:13 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'CF-RAY': '9b7c5ade2b4f4b78-AMS', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767378913-oFs5oOGVH6cbTHfF54Io', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767378913, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ студента не содержит никакой информации, относящейся к вопросу о галлюцинациях в больших языковых моделях. Фраза \'гойда\' не является р
Request completed in 4.2s
Returning result: <class 'dict'>
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1671
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-26, started daemon 17916)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 2282 bytes (total unknown)
Progress: 2282 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Fri, 02 Jan 2026 18:35:21 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b7c5b10a890a003-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767378921-pZ1BUHfCAJSgi9yQiaEo', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767378921, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ не содержит никакой информации, требуемой вопросом. Студент использовал одно слово \'гойда\', которое не раскрывает ни этапы жи
Request completed in 3.9s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3291
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-28, started daemon 22260)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3291
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 541, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 411, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 135, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 576, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ai
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1280
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 22356)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 26817 bytes (total unknown)
Progress: 26817 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 11:41:54 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b823ac8a9813ee4-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767440513-6w7x3rKmiCNW66mJ5x9f', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767440513, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\\n\\nИскусственный интеллект, или ИИ (Artificial Intelligence), — это одна из самых трансформационных и дискуссионных технологий совре
Request completed in 43.6s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 14571
Content preview: {
  "theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\n\nИскусственный интеллект, или ИИ (Artificial Intelligence), — это одна из самых трансформационных и дискуссионных технологий современнос...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ai
  Difficulty: легкий
  Language: en
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 888
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 6820)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ai
  Difficulty: легкий
  Language: ru
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1280
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 4512)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.3s elapsed
  Still waiting... 45.3s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 25987 bytes (total unknown)
Progress: 25987 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 11:57:18 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b82513b29558071-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767441432-S3B64JrG6BH07TFMmqAk', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767441432, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в искусственный интеллект[/b]\\n\\nИскусственный интеллект (ИИ) — это одна из самых революционных и трансформационных технологий современности. Несмотря на то что этот т
Request completed in 46.8s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 13948
Content preview: {
  "theory": "[b]Введение в искусственный интеллект[/b]\n\nИскусственный интеллект (ИИ) — это одна из самых революционных и трансформационных технологий современности. Несмотря на то что этот термин ...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_quiz() starting ===
  Topic: ai
  Difficulty: легкий
  Language: en
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 888
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-6, started daemon 20492)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.2s elapsed
  Still waiting... 45.3s elapsed
  Still waiting... 50.3s elapsed
  Still waiting... 55.3s elapsed
Request timeout after 60.1s
Request completed in 60.1s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 530, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 362, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 888
urllib.request.Request created
Opening URL...
Response received, status: 200
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 22173 bytes (total unknown)
Progress: 22173 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 11:58:17 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8252c8da27a015-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767441496-HTVYwKfEKonaV8C2WImA', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767441496, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "theory": "[p]Приветствуем в нашем подробном руководстве по миру [b]искусственного интеллекта[/b] (ИИ). Эта область технологий стремительно меняет нашу жизнь, и даже если вы только на
Response parsed successfully
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 12594
Content preview: ```json
{
  "theory": "[p]Тема: Искусственный интеллект (ИИ) - введение и основы[/p]\n\n[p][b]Введение[/b][/p]\n[p]Искусственный интеллект, или ИИ (Artificial Intelligence), — это одна из самых захват...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ai
  Difficulty: легкий
  Language: en
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 888
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-8, started daemon 7748)>
Waiting for request to complete...
  Still waiting... 5.2s elapsed
  Still waiting... 10.6s elapsed
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
  Still waiting... 16.0s elapsed
  Still waiting... 21.4s elapsed
  Still waiting... 26.9s elapsed
  Still waiting... 32.3s elapsed
  Still waiting... 37.7s elapsed
  Still waiting... 43.0s elapsed
  Still waiting... 48.4s elapsed
  Still waiting... 53.6s elapsed
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ai
  Difficulty: легкий
  Language: en
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 888
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 23752)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.0s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 21311 bytes (total unknown)
Progress: 21311 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 12:04:57 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b825c7f2f14fead-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767441894-jCl17EH66Cr6Q5s3OrYX', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767441894, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n    "theory": "[p]Добро пожаловать в увлекательный мир [b]искусственного интеллекта (ИИ)[/b]! Если вы когда-либо задумывались о том, как телефоны предсказывают следующее слово, как навигаторы ст
Request completed in 39.1s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 12127
Content preview: {
    "theory": "[p]Добро пожаловать в увлекательный мир [b]искусственного интеллекта (ИИ)[/b]! Если вы когда-либо задумывались о том, как телефоны предсказывают следующее слово, как навигаторы строят...
Parsing JSON response...
JSON parse error: Invalid control character at: line 2 column 389 (char 390)
Content was: {
    "theory": "[p]Добро пожаловать в увлекательный мир [b]искусственного интеллекта (ИИ)[/b]! Если вы когда-либо задумывались о том, как телефоны предсказывают следующее слово, как навигаторы строят оптимальные маршруты или как роботы собирают машины, значит, вы уже касались основ ИИ. В этой статье мы просто и понятно разберем, что это такое, откуда взялось и как меняет нашу жизнь.[/p]

[p]Стоит сразу оговориться: на популярном языке понятие [b]ИИ[/b] часто путают с понятием [b]Машинное обучен...
generate_mock_quiz() called
  Error: Ошибка парсинга JSON: Invalid control character at: line 2 column 389 (char 390)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 20972)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 177
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 19996)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 177
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 2
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 161
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 11832)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 161
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
=== chat_with_image() starting ===
  Message length: 2
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 161
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 2196)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 915 bytes (total unknown)
Progress: 915 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 12:44:43 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8296cde9a066cf-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767444282-u9cKzAXgiv5o9s0cR9sX', 'provider': 'Google', 'model': 'google/gemini-2.0-flash-exp:free', 'object': 'chat.completion', 'created': 1767444282, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'STOP', 'index': 0, 'message': {'role': 'assistant', 'content': 'К сожалению, я не уверен, что вы имеете в виду. Не могли бы вы расшифровать запрос или запросить что-нибудь еще?', 'refusal': None, 'reasoning': None, 'annotations': []}}], 'usage': {'prompt
Request completed in 1.3s
Returning result: <class 'dict'>
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 452
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-6, started daemon 16600)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.4s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 452
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 452
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 9372)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 786 bytes (total unknown)
Progress: 786 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 12:44:51 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b829701bfcfdf76-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767444290-JUeSub5xur7dD0NQnM5T', 'provider': 'Google', 'model': 'google/gemini-2.0-flash-exp:free', 'object': 'chat.completion', 'created': 1767444290, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'STOP', 'index': 0, 'message': {'role': 'assistant', 'content': 'Привет! Чем я могу помочь вам сегодня?\n', 'refusal': None, 'reasoning': None, 'annotations': []}}], 'usage': {'prompt_tokens': 36, 'completion_tokens': 10, 'total_tokens': 46, 'cost': 0, 'i
Request completed in 0.8s
Returning result: <class 'dict'>
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: True
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 135513
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 20012)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.9s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 135513
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
=== chat_with_image() starting ===
  Message length: 6
  Image provided: True
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 135513
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 3712)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 338 bytes (total unknown)
Progress: 338 bytes (total unknown)
UrlRequest FAILURE!
  Status: 429
  Result: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Request completed in 1.5s
Request failed with error: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Kivy UrlRequest failed: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 135513
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib error reason: Too Many Requests (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 729
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-6, started daemon 17248)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.4s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 729
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 729
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 24152)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 2541 bytes (total unknown)
Progress: 2541 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 14:42:05 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8342b9fe3a66a6-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767451324-aR0AAVMjjYLW6a9ttuaB', 'provider': 'Google', 'model': 'google/gemini-2.0-flash-exp:free', 'object': 'chat.completion', 'created': 1767451324, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'STOP', 'index': 0, 'message': {'role': 'assistant', 'content': 'Похоже, сейчас есть проблемы с подключением к сервису, который используется для генерации ответов. Ошибка "HTTP 429: Too Many Requests" означает, что отправлено слишком много запросов за кор
Request completed in 2.8s
Returning result: <class 'dict'>
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: True
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 135513
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 22140)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 1.8s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 135513
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 429
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-6, started daemon 24620)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.4s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 429
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 24088)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 338 bytes (total unknown)
Progress: 338 bytes (total unknown)
UrlRequest FAILURE!
  Status: 429
  Result: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Request completed in 1.2s
Request failed with error: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Kivy UrlRequest failed: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 177
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib error reason: Too Many Requests (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 21544)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 177
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 23640)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 759 bytes (total unknown)
Progress: 759 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 14:50:58 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b834fbc8e9fdb60-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767451857-zfaGhbhn2wP196ly7uys', 'provider': 'Google', 'model': 'google/gemini-2.0-flash-exp:free', 'object': 'chat.completion', 'created': 1767451857, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'STOP', 'index': 0, 'message': {'role': 'assistant', 'content': 'Привет! Чем могу помочь?\n', 'refusal': None, 'reasoning': None, 'annotations': []}}], 'usage': {'prompt_tokens': 4, 'completion_tokens': 7, 'total_tokens': 11, 'cost': 0, 'is_byok': False, 
Request completed in 1.1s
Returning result: <class 'dict'>
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 22900)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 338 bytes (total unknown)
Progress: 338 bytes (total unknown)
UrlRequest FAILURE!
  Status: 429
  Result: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Request completed in 0.9s
Request failed with error: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Kivy UrlRequest failed: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 177
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib error reason: Too Many Requests (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Sending request to OpenRouter (Chat)...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 729
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-6, started daemon 20560)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 338 bytes (total unknown)
Progress: 338 bytes (total unknown)
UrlRequest FAILURE!
  Status: 429
  Result: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Request completed in 0.8s
Request failed with error: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Kivy UrlRequest failed: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 729
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib error reason: Too Many Requests (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
Exception in chat_with_image: Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Trying model: google/gemini-2.0-flash-exp:free...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 6900)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 338 bytes (total unknown)
Progress: 338 bytes (total unknown)
UrlRequest FAILURE!
  Status: 429
  Result: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Request completed in 0.9s
Request failed with error: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Kivy UrlRequest failed: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 177
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib error reason: Too Many Requests (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
Exception with model google/gemini-2.0-flash-exp:free: Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
Trying model: qwen/qwen-2-vl-7b-instruct:free...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 176
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 7100)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 832 bytes (total unknown)
Progress: 832 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 15:01:20 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b835eee4bfbd8d0-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767452479-4icaHkbEA8l8emWm9shQ', 'provider': 'ModelRun', 'model': 'qwen/qwen-2.5-vl-7b-instruct:free', 'object': 'chat.completion', 'created': 1767452479, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': 'Привет! Как дела? Можно я помогу вам каким-нибудь образом?', 'refusal': None, 'reasoning': None}}], 'system_fingerprint': None, 'usage': {'prompt_tokens': 30, 'completion_tokens': 18, 'to
Request completed in 1.0s
Returning result: <class 'dict'>
Success with model: qwen/qwen-2-vl-7b-instruct:free
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Trying model: google/gemini-2.0-flash-exp:free...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 5784)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 338 bytes (total unknown)
Progress: 338 bytes (total unknown)
UrlRequest FAILURE!
  Status: 429
  Result: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Request completed in 1.0s
Request failed with error: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Kivy UrlRequest failed: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 177
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib failed: HTTP Error 429: Too Many Requests
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 429: Too Many Requests

urllib error reason: Too Many Requests (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
Exception with model google/gemini-2.0-flash-exp:free: Все методы HTTP не сработали: Kivy: HTTP 429: {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'google/gemini-2.0-flash-exp:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Google'}}, 'user_id': 'user_2tGoswG9dtY4n5tnpV458NMayDJ'}; urllib: HTTP Error 429: Too Many Requests
Trying model: qwen/qwen-2-vl-7b-instruct:free...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 176
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 19468)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 746 bytes (total unknown)
Progress: 746 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 16:03:45 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b83ba5d0f5d9f69-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767456224-qMG7ovRwwNtSKzplBnLV', 'provider': 'ModelRun', 'model': 'qwen/qwen-2.5-vl-7b-instruct:free', 'object': 'chat.completion', 'created': 1767456224, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': 'Привет! Как дела?', 'refusal': None, 'reasoning': None}}], 'system_fingerprint': None, 'usage': {'prompt_tokens': 30, 'completion_tokens': 7, 'total_tokens': 37, 'cost': 0, 'is_byok': Fal
Request completed in 0.8s
Returning result: <class 'dict'>
Success with model: qwen/qwen-2-vl-7b-instruct:free
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-e...a5f64
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 21832)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.2s elapsed
  Still waiting... 45.3s elapsed
  Still waiting... 50.3s elapsed
  Still waiting... 55.3s elapsed
Request timeout after 60.1s
Request completed in 60.1s
Request failed with error: Request timeout
Kivy UrlRequest failed: Request timeout
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: Request timeout

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 1282
urllib.request.Request created
Opening URL...
Response received, status: 200
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-b...d2ffb
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 14096)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.2s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.3s elapsed
  Still waiting... 45.3s elapsed
  Still waiting... 50.3s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 22682 bytes (total unknown)
Progress: 22682 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 20:48:14 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b855adcaeb7669e-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767473284-qLe5xk4w09y96vJrEyn6', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767473284, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\\n\\nИскусственный интеллект, или [b]ИИ[/b], — это одна из самых трансформационных и дискуссионных областей современной науки и технол
Request completed in 50.6s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 11988
Content preview: {
  "theory": "[b]Введение в искусственный интеллект (ИИ)[/b]\n\nИскусственный интеллект, или [b]ИИ[/b], — это одна из самых трансформационных и дискуссионных областей современной науки и технологий. ...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== evaluate_answer() starting ===
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1460
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-6, started daemon 24132)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 2445 bytes (total unknown)
Progress: 2445 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 20:49:42 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b855d40ccc6bccf-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767473382-0icPq0o9y0fBoTz9pLEm', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767473382, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "score": 0,\n  "max_score": 10,\n  "commentary": "Ответ полностью не соответствует заданию. Студент не перечислил типы машинного обучения, не дал их описания и не привел примеры задач
Request completed in 3.5s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3242
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-8, started daemon 12916)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1057 bytes (total unknown)
Progress: 1057 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sat, 03 Jan 2026 20:49:54 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b855d80ed45ed05-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767473392-781bdCrJRRFdHPRlnEs0', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767473392, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n"Этика и ответственность в ИИ",\n"Машинное обучение (Machine Learning)",\n"Глубокое обучение (Deep Learning)",\n"Модели Large Language Models (LLM) и GAN",\n"Разработка и обучение нейронных сете
Request completed in 3.3s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: [
"Этика и ответственность в ИИ",
"Машинное обучение (Machine Learning)",
"Глубокое обучение (Deep Learning)",
"Модели Large Language Models (LLM) и GAN",
"Разработка и обучение нейронных сетей"
]...
Тема сохранена в памяти: Глубокое обучение (Deep Learning)
Тема сохранена в памяти: Модели Large Language Models (LLM) и GAN
Тема сохранена в памяти: Разработка и обучение нейронных сетей
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Trying model: google/gemini-2.0-flash-exp:free...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 6704)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 771 bytes (total unknown)
Progress: 771 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 04 Jan 2026 12:13:52 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8aa6fd089eb5ad-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767528831-KpKhc5Lqa2u5N0iEtjMv', 'provider': 'Google', 'model': 'google/gemini-2.0-flash-exp:free', 'object': 'chat.completion', 'created': 1767528831, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'STOP', 'index': 0, 'message': {'role': 'assistant', 'content': 'Здравствуйте! Чем могу помочь?\n', 'refusal': None, 'reasoning': None, 'annotations': []}}], 'usage': {'prompt_tokens': 4, 'completion_tokens': 7, 'total_tokens': 11, 'cost': 0, 'is_byok': F
Request completed in 1.1s
Returning result: <class 'dict'>
Success with model: google/gemini-2.0-flash-exp:free
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== chat_with_image() starting ===
  Message length: 6
  Image provided: False
Trying model: google/gemini-2.0-flash-exp:free...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 177
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 14824)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 777 bytes (total unknown)
Progress: 777 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 04 Jan 2026 12:18:51 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8aae4d2db960e5-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767529131-LlFGx5XlisEG2JPFP7di', 'provider': 'Google', 'model': 'google/gemini-2.0-flash-exp:free', 'object': 'chat.completion', 'created': 1767529131, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'STOP', 'index': 0, 'message': {'role': 'assistant', 'content': 'Привет! Как дела? Чем могу помочь?\n', 'refusal': None, 'reasoning': None, 'annotations': []}}], 'usage': {'prompt_tokens': 4, 'completion_tokens': 10, 'total_tokens': 14, 'cost': 0, 'is_byo
Request completed in 1.4s
Returning result: <class 'dict'>
Success with model: google/gemini-2.0-flash-exp:free
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: E:\context_study\llm.py
.env loaded from: E:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-b...d2ffb
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 5908)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
  Still waiting... 30.2s elapsed
  Still waiting... 35.2s elapsed
  Still waiting... 40.2s elapsed
  Still waiting... 45.3s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 26407 bytes (total unknown)
Progress: 26407 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 04 Jan 2026 12:47:58 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8ad8c6f9556661-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767530871-l2MPhgfXn6b2GLoujeKK', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767530871, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в Искусственный Интеллект: Основы и Перспективы[/b]\\n\\nИскусственный интеллект, или ИИ, является одной из самых трансформационных и обсуждаемых технологий современност
Request completed in 46.3s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 14042
Content preview: {
  "theory": "[b]Введение в Искусственный Интеллект: Основы и Перспективы[/b]\n\nИскусственный интеллект, или ИИ, является одной из самых трансформационных и обсуждаемых технологий современности. Хот...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: ии
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-b...d2ffb
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1282
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 18672)>
Waiting for request to complete...
  Still waiting... 5.2s elapsed
  Still waiting... 10.6s elapsed
  Still waiting... 15.8s elapsed
  Still waiting... 21.2s elapsed
  Still waiting... 26.7s elapsed
  Still waiting... 32.0s elapsed
  Still waiting... 37.3s elapsed
  Still waiting... 42.6s elapsed
  Still waiting... 48.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 24576 bytes (total unknown)
Progress: 29552 bytes (total unknown)
Progress: 29552 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 04 Jan 2026 13:01:20 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8aec6d2f32b945-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767531675-BrWWCrCFqJFtmAGpIVgk', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767531675, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n"theory": "[b]Введение в искусственный интеллект[/b]\\n\\n[i]Искусственный интеллект (ИИ)[/i], или машинный интеллект, — это широкая область компьютерных наук, которая занимается созданием интел
Request completed in 51.0s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 15578
Content preview: {
"theory": "[b]Введение в искусственный интеллект[/b]\n\n[i]Искусственный интеллект (ИИ)[/i], или машинный интеллект, — это широкая область компьютерных наук, которая занимается созданием интеллектуа...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_quiz() starting ===
  Topic: общение с девушками
  Difficulty: легкий
  API key provided: True
  Platform: win32
  IS_ANDROID: False
Using API Key: sk-or-v1-b...d2ffb
Headers prepared: ['Authorization', 'Content-Type', 'User-Agent', 'HTTP-Referer', 'X-Title']
Model: xiaomi/mimo-v2-flash:free
Sending request to OpenRouter...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 1314
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-3, started daemon 12024)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
  Still waiting... 10.1s elapsed
  Still waiting... 15.1s elapsed
  Still waiting... 20.1s elapsed
  Still waiting... 25.1s elapsed
Progress: 0 bytes (total unknown)
Progress: 8192 bytes (total unknown)
Progress: 16384 bytes (total unknown)
Progress: 19195 bytes (total unknown)
Progress: 19195 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 04 Jan 2026 13:09:23 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8af852a8b2f5c7-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767532163-EFkSsn8kpsAn6Bqkb9cg', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767532163, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '{\n  "theory": "[b]Введение в общение с девушками: фундаментальные основы[/b]\\n\\nОбщение с девушками — это многогранная и увлекательная тема, которая охватывает социальные, психологические и куль
Request completed in 29.3s
Returning result: <class 'dict'>
Got response from OpenRouter
Response keys: ['id', 'provider', 'model', 'object', 'created', 'choices', 'usage']
Content length: 10223
Content preview: {
  "theory": "[b]Введение в общение с девушками: фундаментальные основы[/b]\n\nОбщение с девушками — это многогранная и увлекательная тема, которая охватывает социальные, психологические и культурные...
Parsing JSON response...
Quiz has 10 questions
Validated 10 questions
Quiz generated successfully!
=== generate_open_questions() starting ===
  Topic: общение с девушками
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 796
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-5, started daemon 16064)>
Waiting for request to complete...
  Still waiting... 5.0s elapsed
Progress: 0 bytes (total unknown)
Progress: 2390 bytes (total unknown)
Progress: 2390 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 04 Jan 2026 13:10:00 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8af91eed511ca7-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767532195-sW9poBiZygf4y4yxCyYr', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767532195, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n  {\n    "id": "q1",\n    "question": "Какие твои главные критерии для построения крепких и здоровых отношений с девушкой?",\n    "notes": "В ответе должны быть упомянуты: открытость и честность
Request completed in 8.6s
Returning result: <class 'dict'>
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3289
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-7, started daemon 12060)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 1114 bytes (total unknown)
Progress: 1114 bytes (total unknown)
UrlRequest SUCCESS!
  Status: 200
  Headers: {'Date': 'Sun, 04 Jan 2026 13:10:30 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'CF-RAY': '9b8af9f04836febb-AMS', 'Access-Control-Allow-Origin': '*', 'Vary': 'Accept-Encoding', 'Permissions-Policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'Referrer-Policy': 'no-referrer, strict-origin-when-cross-origin', 'X-Content-Type-Options': 'nosniff', 'Server': 'cloudflare', 'Set-Cookie': ''}
  Result type: <class 'dict'>
  Result preview: {'id': 'gen-1767532229-xyPRqqrblPy1vl4lxPFK', 'provider': 'Xiaomi', 'model': 'xiaomi/mimo-v2-flash:free', 'object': 'chat.completion', 'created': 1767532229, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '[\n    "Психология привлечения (аттракция)",\n    "Развитие навыков активного слушания",\n    "Язык тела и невербальная коммуникация",\n    "Постановка личных границ в отношениях",\n    "Теория и п
Request completed in 3.0s
Returning result: <class 'dict'>
Got response from OpenRouter (next topics)
Content preview: [
    "Психология привлечения (аттракция)",
    "Развитие навыков активного слушания",
    "Язык тела и невербальная коммуникация",
    "Постановка личных границ в отношениях",
    "Теория и практика ...
Тема сохранена в памяти: Психология привлечения (аттракция)
Тема сохранена в памяти: Развитие навыков активного слушания
Тема сохранена в памяти: Язык тела и невербальная коммуникация
Тема сохранена в памяти: Постановка личных границ в отношениях
Тема сохранена в памяти: Теория и практика эмпатии
Saved 5 topics to memory.
=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3289
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 17588)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.7s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3289
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 136, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 577, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

=== LLM Module Loading ===
Python version: 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]
Platform: win32
Current directory: E:\context_study
__file__: e:\context_study\llm.py
.env loaded from: e:\context_study\.env, exists: True
Not running on Android (android module not found)
=== generate_next_topics() starting ===
  Material snippet length: 1500
  API key provided: False
API key from env: True
Sending request to OpenRouter for next topics...
make_request() starting...
Attempting Kivy UrlRequest...
make_request_kivy() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
  Timeout: 60
  Data keys: ['model', 'messages']
UrlRequest imported successfully
Request body prepared, length: 3289
Creating UrlRequest...
UrlRequest created: <UrlRequestUrllib(Thread-4, started daemon 9024)>
Waiting for request to complete...
Progress: 0 bytes (total unknown)
Progress: 50 bytes (total unknown)
Progress: 50 bytes (total unknown)
UrlRequest FAILURE!
  Status: 401
  Result: {'error': {'message': 'User not found.', 'code': 401}}
Request completed in 0.6s
Request failed with error: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Kivy UrlRequest failed: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 531, in make_request
    return make_request_kivy(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 363, in make_request_kivy
    raise Exception(_async_error)
Exception: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}

Attempting urllib...
make_request_urllib() starting...
  URL: https://openrouter.ai/api/v1/chat/completions
urllib.request and ssl imported
SSL context created (no verification)
Request body prepared, length: 3289
urllib.request.Request created
Opening URL...
urlopen failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib failed: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 542, in make_request
    return make_request_urllib(url, headers, data, timeout)
  File "e:\context_study\llm.py", line 412, in make_request_urllib
    with urllib.request.urlopen(req, timeout=timeout, context=ctx) as response:
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 216, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 525, in open
    response = meth(req, response)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 634, in http_response
    response = self.parent.error(
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 563, in error
    return self._call_chain(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 496, in _call_chain
    result = func(*args)
  File "C:\Users\Пользователь\AppData\Local\Programs\Python\Python310\lib\urllib\request.py", line 643, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized

urllib error reason: Unauthorized (<class 'str'>)
Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Exception in generate_next_topics: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized
Traceback: Traceback (most recent call last):
  File "e:\context_study\llm.py", line 136, in generate_next_topics
    result = make_request(url, headers, data, timeout=60)
  File "e:\context_study\llm.py", line 577, in make_request
    raise Exception(error_msg)
Exception: Все методы HTTP не сработали: Kivy: HTTP 401: {'error': {'message': 'User not found.', 'code': 401}}; urllib: HTTP Error 401: Unauthorized

